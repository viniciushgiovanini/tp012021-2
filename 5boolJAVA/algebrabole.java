//Aluno Vin√≠cius Henrique Giovanini
//Matricula: 692225
public class algebrabole {

  public static int tresbool12(String entrada, int valor1, int valor2, int valor3) {
    int resposta = 0;
    if (valor1 == 0 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 0 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    return resposta;
  }

  public static int tresbool11(String entrada, int valor1, int valor2, int valor3) {
    int resposta = 0;
    if (valor1 == 0 && valor2 == 0 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 0 && valor2 == 0 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    return resposta;
  }

  public static int tresbool10(String entrada, int valor1, int valor2, int valor3) {

    int resposta = 0;
    if (valor1 == 0 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 0 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    return resposta;
  }

  public static int tresbool9(String entrada, int valor1, int valor2, int valor3) {
    int resposta = 0;
    if (valor1 == 0 && valor2 == 0 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 0 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    return resposta;
  }

  public static int tresbool8(String entrada, int valor1, int valor2, int valor3) {

    int resposta = 0;
    if (valor1 == 0 && valor2 == 0 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 0 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    return resposta;

  }

  public static int tresbool7(String entrada, int valor1, int valor2, int valor3) {
    int resposta = 0;
    if (valor1 == 0 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 0 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    return resposta;
  }

  public static int tresbool6(String entrada, int valor1, int valor2, int valor3) {
    int resposta = 0;
    if (valor1 == 0 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    return resposta;
  }

  public static int tresbool5(String entrada, int valor1, int valor2, int valor3) {
    int resposta = 0;
    if (valor1 == 0 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 0 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    return resposta;
  }

  public static int tresbool4(String entrada, int valor1, int valor2, int valor3) {
    int resposta = 0;
    if (valor1 == 0 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 0 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    return resposta;
  }

  public static int tresbool3(String entrada, int valor1, int valor2, int valor3) {
    int resposta = 0;
    if (valor1 == 0 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 0 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    return resposta;

  }

  public static int tresbool2(String entrada, int valor1, int valor2, int valor3) {

    int resposta = 0;
    if (valor1 == 0 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 0 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 1) {

      resposta = 1;

    }

    return resposta;

  }

  public static int tresbool(String entrada, int valor1, int valor2, int valor3) {

    int resposta = 0;
    if (valor1 == 0 && valor2 == 0 && valor3 == 0) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 0 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 0 && valor2 == 1 && valor3 == 1) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 0 && valor3 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 0) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1 && valor3 == 1) {

      resposta = 0;

    }

    return resposta;

  }

  public static int doisbool2(String entrada2, int valor1, int valor2) {

    int resposta = 0;

    if (valor1 == 0 && valor2 == 0) {

      resposta = 1;

    }

    if (valor1 == 0 && valor2 == 1) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 0) {

      resposta = 1;

    }

    if (valor1 == 1 && valor2 == 1) {

      resposta = 0;

    }

    return resposta;

  }

  public static int doisbool(String entrada1, int valor1, int valor2) {

    int resposta = 0;

    if (valor1 == 0 && valor2 == 0) {

      resposta = 1;

    }

    if (valor1 == 0 && valor2 == 1) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 0) {

      resposta = 0;

    }

    if (valor1 == 1 && valor2 == 1) {

      resposta = 0;

    }

    return resposta;

  }

  public static void main(String[] args) {// Esse programa recebe um inteiro com a quantidade de vezes que vai ser
                                          // executado o mesmo, logo em seguida se a quantidade for = 2 ele receber 2
                                          // valores e ser for igual a 3 ele recebe 3 valores em variaveis diferentes,
                                          // logo em seguida ele recebe a algebra booleana, e cada algebra tem sua
                                          // fun√ß√£o no programa, sendo 12 algebras diferentes, cada fun√ß√£o da resultados
                                          // diferentes com os valores que vai sendo digitado na entrada e mostrando o
                                          // resultado se √© 0 ou 1

    int quantidade = MyIO.readInt();

    while (quantidade != 0) {

      int valor1 = 0;
      int valor2 = 0;
      int valor3 = 0;
      int resposta = 0;

      if (quantidade == 2) {
        valor1 = MyIO.readInt();
        valor2 = MyIO.readInt();
      }

      if (quantidade == 3) {
        valor1 = MyIO.readInt();
        valor2 = MyIO.readInt();
        valor3 = MyIO.readInt();
      }

      String entrada = MyIO.readLine();

      if (quantidade == 2 && entrada.equals("and(not(A) , not(B))")) {

        resposta = doisbool(entrada, valor1, valor2);

      }

      if (quantidade == 2 && entrada.equals("not(and(A , B))")) {

        resposta = doisbool2(entrada, valor1, valor2);

      }

      if (quantidade == 3 && entrada.equals("and(or(A , B) , not(and(B , C)))")) {

        resposta = tresbool(entrada, valor1, valor2, valor3);

      }

      if (quantidade == 3 && entrada.equals("and(A , or(B , C))")) {

        resposta = tresbool2(entrada, valor1, valor2, valor3);

      }

      if (quantidade == 3 && entrada.equals("or(and(A , B) , and(A , C))")) {

        resposta = tresbool3(entrada, valor1, valor2, valor3);

      }

      if (quantidade == 3 && entrada.equals("or(and(A , B), and(A , C))")) {

        resposta = tresbool4(entrada, valor1, valor2, valor3);

      }

      if (quantidade == 3 && entrada.equals("or(A , and(B , C))")) {

        resposta = tresbool5(entrada, valor1, valor2, valor3);

      }

      if (quantidade == 3 && entrada.equals("or(or(A , B) , C) ")) {

        resposta = tresbool6(entrada, valor1, valor2, valor3);

      }

      if (quantidade == 3 && entrada.equals("or(and(A , B , C) , and(or(A , B) , C))")) {

        resposta = tresbool7(entrada, valor1, valor2, valor3);

      }

      if (quantidade == 3 && entrada.equals(
          "or(and(A , B , C) , and(A , not(B) , C) , and(not(A) , not(B) , C) , and(not(A) , not(B) , not(C)))")) {

        resposta = tresbool8(entrada, valor1, valor2, valor3);

      }

      if (quantidade == 3 && entrada.equals("or(not(A) , B , and(A , B , not(C)))")) {

        resposta = tresbool9(entrada, valor1, valor2, valor3);

      }

      if (quantidade == 3 && entrada.equals("and(or(A , B , not(C)) , or(B , C) , or(not(A) , C))")) {

        resposta = tresbool10(entrada, valor1, valor2, valor3);

      }

      if (quantidade == 3 && entrada.equals(
          "or(or(and(not(and(A , B)) , not(C)) , and(not(A) , B , C) , and(A , B , C) , and(A , not(B) , not(C))) , and(A , not(B) , C))")) {

        resposta = tresbool11(entrada, valor1, valor2, valor3);

      }

      if (quantidade == 3 && entrada.equals("or(and(A , B , C) , and(A , not(B) , not(and(not(A) , not(C)))))")) {

        resposta = tresbool12(entrada, valor1, valor2, valor3);

      }

      System.out.println(resposta);

      quantidade = MyIO.readInt();

    }

    return;

  }
}
